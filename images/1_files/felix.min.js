!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e){t.exports={PLATFORMS:{nationals:"1",regionals:"2",ronionals:"3"},DATA_TRACK_ATTRIBUTE:"tmdatatrack",END_SCROLL_VISIBILITY_CHECK_TIMEOUT:200,LOCAL_STORAGE_KEY:"TM_felix",FELIX_FILE_NAME:"felix.min.js",PAGEVIEWID_WINDOW_KEY:"TM_PAGEVIEWID",ELEMENT_CHECK_INTERVAL:1e3,BATCH_TIMEOUT:500}},function(t,e,n){const i=n(2),o=n(5),r=n(0),a=n(6);let d;function c(){d=i(),window[r.PAGEVIEWID_WINDOW_KEY]=d;const t=o.customEvent(r.PAGEVIEWID_WINDOW_KEY,{detail:d});document.dispatchEvent(t)}c();const u={};let s,l=function(){let t,e=[];return{get:function(n){return t||e.push(n),n(t)},set:function(n){t=n,e.forEach(function(e){e(t)}),e=[]}}}();u.getUserId=function(t){l.get(function(e){t(e.siteUserId)})};let T={};function f(){0!==Object.keys(T).length&&l.get(function(t){let e=new XMLHttpRequest;e.open("POST",t.endpoint+"batch",!0),e.setRequestHeader("Content-type","application/json"),e.send(JSON.stringify(T)),T={}})}const m=o.debounce(f,r.BATCH_TIMEOUT);function A(t,e){o.inIFrame()?window.parent.postMessage({felixData:t,endpoint:e},"*"):(t.pageviewId=d,t.userTimestamp=(new Date).getTime(),"click"===e||"visibility"===e||"loadedelement"===e||"pageClosed"===e?(T[e]||(T[e]=[]),T[e].push(t),m()):l.get(function(n){let i=new XMLHttpRequest;i.open("POST",n.endpoint+e,!0),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(t))}))}function g(){if(o.inIFrame())return;let t=o.getPerformanceMetrics();A({referrer:document.referrer,url:o.getPageUrl(),width:o.getPageWidth(),height:o.getPageHeight(),pageIdentity:a(),siteUserId:s,pageFirstInteraction:t.pageFirstInteraction,pageLoadTime:t.pageLoadTime,pageFirstPaint:t.pageFirstPaint},"pageview")}function p(t){const e={};for(var n=0;n<t.attributes.length;n++){const i=t.attributes[n];if(RegExp("(data-)?"+r.DATA_TRACK_ATTRIBUTE+"-.*").test(i.name)){const t=i.name.replace("data-"+r.DATA_TRACK_ATTRIBUTE+"-","").replace(r.DATA_TRACK_ATTRIBUTE+"-","");"exists"!==t&&"visible"!==t&&(e[t]=i.value)}}return e}function E(t){const e=t.getBoundingClientRect?t.getBoundingClientRect():{};u.visible(t.getAttribute(r.DATA_TRACK_ATTRIBUTE)||t.getAttribute("data-"+r.DATA_TRACK_ATTRIBUTE),Math.round(e.x||0),Math.round(e.y||0),p(t))}function _(t){u.loaded(t.getAttribute(r.DATA_TRACK_ATTRIBUTE)||t.getAttribute("data-"+r.DATA_TRACK_ATTRIBUTE),p(t))}u.click=function(t,e,n,i){A({eventName:t,additionalProperties:i,x:e,y:n},"click"),f()},u.visible=function(t,e,n,i){A({eventName:t,additionalProperties:i,x:e,y:n},"visibility")},u.loaded=function(t,e){A({eventName:t,additionalProperties:e},"loadedelement")};const I=o.debounce(()=>{R(),w()},r.END_SCROLL_VISIBILITY_CHECK_TIMEOUT);function b(t){if(t.target){const e=o.closest(t.target,"[data-"+r.DATA_TRACK_ATTRIBUTE+"], ["+r.DATA_TRACK_ATTRIBUTE+"]");e&&function(t,e){u.click(e.getAttribute(r.DATA_TRACK_ATTRIBUTE)||e.getAttribute("data-"+r.DATA_TRACK_ATTRIBUTE),Math.round(t.pageX)||0,Math.round(t.pageY)||0,p(e))}(t,e)}}let v=o.getPageUrl();function R(){const t=document.querySelectorAll("[data-"+r.DATA_TRACK_ATTRIBUTE+"]:not([data-"+r.DATA_TRACK_ATTRIBUTE+"-exists]), ["+r.DATA_TRACK_ATTRIBUTE+"]:not([data-"+r.DATA_TRACK_ATTRIBUTE+"-exists])");for(let e=0;e<t.length;e++){t[e].setAttribute("data-"+r.DATA_TRACK_ATTRIBUTE+"-exists",!0)}for(let e=0;e<t.length;e++){_(t[e])}}function w(){const t=document.querySelectorAll("[data-"+r.DATA_TRACK_ATTRIBUTE+"]:not([data-"+r.DATA_TRACK_ATTRIBUTE+"-visible]), ["+r.DATA_TRACK_ATTRIBUTE+"]:not([data-"+r.DATA_TRACK_ATTRIBUTE+"-visible])"),e=[];for(let n=0;n<t.length;n++){const i=t[n];o.isVisible(i)&&(i.setAttribute("data-"+r.DATA_TRACK_ATTRIBUTE+"-visible",!0),e.push(i))}for(let t=0;t<e.length;t++)E(e[t])}function y(t){t.data.felixData&&t.data.endpoint&&A(t.data.felixData,t.data.endpoint)}function C(){window.localStorage?(window.localStorage.getItem(r.LOCAL_STORAGE_KEY)||window.localStorage.setItem(r.LOCAL_STORAGE_KEY,i()),s=window.localStorage.getItem(r.LOCAL_STORAGE_KEY)):s=i();const t=document.querySelector('script[src$="/'+r.FELIX_FILE_NAME+'"]').src;l.set({endpoint:t.slice(0,t.lastIndexOf("/")+1),siteUserId:s}),g(),document.addEventListener("click",b),R(),w(),setInterval(function(){!function(){const t=o.getPageUrl();t!==v&&(v=t,c(),g())}(),R(),w()},r.ELEMENT_CHECK_INTERVAL),document.addEventListener("scroll",I),window.addEventListener("message",y)}if(!o.inIFrame()){let t=!1,e=0,n=(new Date).getTime(),i=void 0,a=void 0;function h(){const i=(new Date).getTime();t||(e+=Math.min(3e4,i-n)),n=i,t=!1}function L(){h(),t=!0}function D(){document[i]&&!t?L():!document[i]&&t&&h()}void 0!==document.webkitHidden?(i="webkitHidden",a="webkitvisibilitychange"):void 0!==document.mozHidden?(i="mozHidden",a="mozvisibilitychange"):void 0!==document.msHidden&&(i="msHidden",a="msvisibilitychange"),void 0===document.hidden&&void 0!==i||(i="hidden",a="visibilitychange"),setInterval(D,r.ELEMENT_CHECK_INTERVAL),document.addEventListener(a,D),window.addEventListener("blur",L),window.addEventListener("scroll",h),window.addEventListener("focus",h),document.addEventListener("mousemove",h),document.addEventListener("keyup",h),document.addEventListener("touchstart",h),window.addEventListener("beforeunload",function(t){o.inIFrame()||(h(),A({timeOnPage:e},"pageClosed"),f())})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",C):C(),window.felix=u},function(t,e,n){var i=n(3),o=n(4);t.exports=function(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var d=0;d<16;++d)e[r+d]=a[d];return e||o(a)}},function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);t.exports=function(){return n(i),i}}else{var o=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}},function(t,e){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);t.exports=function(t,e){var i=e||0,o=n;return[o[t[i++]],o[t[i++]],o[t[i++]],o[t[i++]],"-",o[t[i++]],o[t[i++]],"-",o[t[i++]],o[t[i++]],"-",o[t[i++]],o[t[i++]],"-",o[t[i++]],o[t[i++]],o[t[i++]],o[t[i++]],o[t[i++]],o[t[i++]]].join("")}},function(t,e){function n(t,e){return t.matches?t.matches(e):t.msMatchesSelector?t.msMatchesSelector(e):t.webkitMatchesSelector?t.webkitMatchesSelector(e):void 0}t.exports={closest:function(t,e){if(t.closest)return t.closest(e);if(!document.documentElement.contains(t))return null;do{if(n(t,e))return t;t=t.parentElement}while(null!==t);return null},getPageHeight:function(){return Math.max(document.body.scrollHeight||0,document.documentElement.scrollHeight||0,document.body.offsetHeight||0,document.documentElement.offsetHeight||0,document.documentElement.clientHeight||0)},getPageWidth:function(){return Math.max(document.body.scrollWidth||0,document.documentElement.scrollWidth||0,document.body.offsetWidth||0,document.documentElement.offsetWidth||0,document.documentElement.clientWidth||0)},getPageUrl:function(){return window.location.href},isVisible:function(t){const e=t.getBoundingClientRect();return e.top>=0&&e.bottom<=window.innerHeight},inIFrame:function(){try{return window.self!==window.top}catch(t){return!0}},customEvent:function(t,e){if("function"==typeof window.CustomEvent)return new window.CustomEvent(t,e);e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n},debounce:function(t,e){let n;return function(){n&&clearTimeout(n),n=setTimeout(()=>{n=void 0,t()},e)}},getPerformanceMetrics:function(){let t={};if(window.performance&&window.performance.getEntriesByType&&window.performance.getEntriesByType("navigation")&&window.performance.getEntriesByType("navigation").length>0){let e=window.performance.getEntriesByType("navigation")[0];t.pageFirstInteraction=e.domInteractive,t.pageLoadTime=e.domComplete,t.pageFirstPaint=e.domContentLoadedEventEnd}return t}}},function(t,e,n){const i=n(0);t.exports=function(){return function(){const t=document.querySelector('meta[name="'+i.DATA_TRACK_ATTRIBUTE+'-pageid"], meta[name="data-'+i.DATA_TRACK_ATTRIBUTE+'-pageid"]');if(!t)return;const e={};for(let n=0;n<t.attributes.length;n++){const i=t.attributes[n];"name"!==i.name&&(e[i.name]=i.value)}return e}()||function(){const t=window.digitalData;if(!t)return;const e={};return t.page&&t.page.attributes&&(e.platform=i.PLATFORMS[t.page.attributes.platform],e.publicationId=t.page.attributes.publicationId,t.page.attributes.sectionId&&(e.sectionId=t.page.attributes.sectionId)),t.article&&t.article.attributes&&t.article.attributes.articleId&&(e.articleId=t.article.attributes.articleId),e}()||{}}}]);